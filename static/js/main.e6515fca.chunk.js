(this.webpackJsonptattoo=this.webpackJsonptattoo||[]).push([[0],{22:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(10),c=a.n(s),i=(a(9),a(3)),l=a(12),u=Object(l.a)("https://gsjipfbsjialhupsjnud.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNzc2MTM3NCwiZXhwIjoxOTUzMzM3Mzc0fQ.utR1_ogr4zNLc3VnNlGnDlxWGGPZIndFmTgmYOis0Xo"),o=a(0),b=a.n(o),j=a(5),d=a(1);function p(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(i.a)(s,2),l=c[0],o=c[1],p=function(){var e=Object(j.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,u.auth.signIn({email:t});case 4:if(a=e.sent,!(n=a.error)){e.next=8;break}throw n;case 8:alert("Check your email for the login link!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0.error_description||e.t0.message);case 14:return e.prev=14,r(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"row flex flex-center",children:Object(d.jsxs)("div",{className:"col-6 form-widget",children:[Object(d.jsx)("h1",{children:"test"}),Object(d.jsx)("p",{className:"description",children:"Sign in via magic link with your email below"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"inputField",type:"email",placeholder:"Your email",value:l,onChange:function(e){return o(e.target.value)}})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),p(l)},className:"button block",disabled:a,children:a?Object(d.jsx)("span",{children:"Loading"}):Object(d.jsx)("span",{children:"Send magic link"})})})]})})}function h(e){var t=e.url,a=e.size,r=e.onUpload,s=Object(n.useState)(null),c=Object(i.a)(s,2),l=c[0],o=c[1],p=Object(n.useState)(!1),h=Object(i.a)(p,2),f=h[0],m=h[1];function O(){return(O=Object(j.a)(b.a.mark((function e(t){var a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.storage.from("avatars").download(t);case 3:if(a=e.sent,n=a.data,!(r=a.error)){e.next=8;break}throw r;case 8:s=URL.createObjectURL(n),o(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("Error downloading image: ",e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function v(){return(v=Object(j.a)(b.a.mark((function e(t){var a,n,s,c,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),t.target.files&&0!==t.target.files.length){e.next=4;break}throw new Error("You must select an image to upload.");case 4:return a=t.target.files[0],n=a.name.split(".").pop(),s="".concat(Math.random(),".").concat(n),c="".concat(s),e.next=7,u.storage.from("avatars").upload(c,a);case 7:if(i=e.sent,!(l=i.error)){e.next=11;break}throw l;case 11:r(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0.message);case 17:return e.prev=17,m(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){t&&function(e){O.apply(this,arguments)}(t)}),[t]),Object(d.jsxs)("div",{children:[l?Object(d.jsx)("img",{src:l,alt:"Avatar",className:"avatar image",style:{height:a,width:a}}):Object(d.jsx)("div",{className:"avatar no-image",style:{height:a,width:a}}),Object(d.jsxs)("div",{style:{width:a},children:[Object(d.jsx)("label",{className:"button primary block",htmlFor:"single",children:f?"Uploading ...":"Upload"}),Object(d.jsx)("input",{style:{visibility:"hidden",position:"absolute"},type:"file",id:"single",accept:"image/*",onChange:function(e){return v.apply(this,arguments)},disabled:f})]})]})}function f(e){var t=e.session,a=Object(n.useState)(!0),r=Object(i.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),p=o[0],f=o[1],m=Object(n.useState)(null),O=Object(i.a)(m,2),v=O[0],x=O[1],g=Object(n.useState)(null),w=Object(i.a)(g,2),k=w[0],y=w[1];function N(){return(N=Object(j.a)(b.a.mark((function e(){var t,a,n,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),t=u.auth.user(),e.next=5,u.from("profiles").select("username, website, avatar_url").eq("id",t.id).single();case 5:if(a=e.sent,n=a.data,r=a.error,s=a.status,!r||406===s){e.next=11;break}throw r;case 11:n&&(f(n.username),x(n.website),y(n.avatar_url)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0.message);case 17:return e.prev=17,c(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})))).apply(this,arguments)}function C(e){return I.apply(this,arguments)}function I(){return I=Object(j.a)(b.a.mark((function e(t){var a,n,r,s,i,l,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.website,r=t.avatar_url,e.prev=1,c(!0),s=u.auth.user(),i={id:s.id,username:a,website:n,avatar_url:r,updated_at:new Date},e.next=7,u.from("profiles").upsert(i,{returning:"minimal"});case 7:if(l=e.sent,!(o=l.error)){e.next=11;break}throw o;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0.message);case 16:return e.prev=16,c(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])}))),I.apply(this,arguments)}return Object(n.useEffect)((function(){!function(){N.apply(this,arguments)}()}),[t]),Object(d.jsxs)("div",{className:"form-widget",children:[Object(d.jsx)(h,{url:k,size:150,onUpload:function(e){y(e),C({username:p,website:v,avatar_url:e})}}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{id:"email",type:"text",value:t.user.email,disabled:!0})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"username",children:"Name"}),Object(d.jsx)("input",{id:"username",type:"text",value:p||"",onChange:function(e){return f(e.target.value)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"website",children:"Website"}),Object(d.jsx)("input",{id:"website",type:"website",value:v||"",onChange:function(e){return x(e.target.value)}})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:"button block primary",onClick:function(){return C({username:p,website:v,avatar_url:k})},disabled:s,children:s?"Loading ...":"Update"})}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:"button block",onClick:function(){return u.auth.signOut()},children:"Sign Out"})})]})}function m(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){r(u.auth.session()),u.auth.onAuthStateChange((function(e,t){r(t)}))}),[]),Object(d.jsx)("div",{className:"container",style:{padding:"50px 0 100px 0"},children:a?Object(d.jsx)(f,{session:a},a.user.id):Object(d.jsx)(p,{})})}var O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root")),O()},9:function(e,t,a){}},[[22,1,2]]]);
//# sourceMappingURL=main.e6515fca.chunk.js.map